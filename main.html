<!-- Attempting to use Elm to update Google Maps, based on tutorial: 
    https://github.com/simonh1000/elm-google-maps-2/blob/master/src/Main.elm
    http://simonh1000.github.io/2015/10/elm-architecture-ports/
    https://github.com/simonh1000/elm-google-maps
    https://github.com/rtfeldman/elm-google-maps/tree/master/src -->

<!DOCTYPE HTML>
<html>
<head>
    <meta charset = "UTF-8">
    <title>GMap Tester</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


    <script type = "text/javascript" src="elm.js"></script>
    <style media = "map_screen">
        #map {
            width: 200px;
            height: 200px;
            background-color: gray;
        }
    </style>


    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['geochart']});
      google.charts.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {
        var data = google.visualization.arrayToDataTable([
          ['Country',   'Latitude'],
          ['Algeria', 36], ['Angola', -8], ['Benin', 6], ['Botswana', -24],
          ['Burkina Faso', 12], ['Burundi', -3], ['Cameroon', 3],
          ['Canary Islands', 28], ['Cape Verde', 15],
          ['Central African Republic', 4], ['Ceuta', 35], ['Chad', 12],
          ['Comoros', -12], ['Cote d\'Ivoire', 6],
          ['Democratic Republic of the Congo', -3], ['Djibouti', 12],
          ['Egypt', 26], ['Equatorial Guinea', 3], ['Eritrea', 15],
          ['Ethiopia', 9], ['Gabon', 0], ['Gambia', 13], ['Ghana', 5],
          ['Guinea', 10], ['Guinea-Bissau', 12], ['Kenya', -1],
          ['Lesotho', -29], ['Liberia', 6], ['Libya', 32], ['Madagascar', null],
          ['Madeira', 33], ['Malawi', -14], ['Mali', 12], ['Mauritania', 18],
          ['Mauritius', -20], ['Mayotte', -13], ['Melilla', 35],
          ['Morocco', 32], ['Mozambique', -25], ['Namibia', -22],
          ['Niger', 14], ['Nigeria', 8], ['Republic of the Congo', -1],
          ['Réunion', -21], ['Rwanda', -2], ['Saint Helena', -16],
          ['São Tomé and Principe', 0], ['Senegal', 15],
          ['Seychelles', -5], ['Sierra Leone', 8], ['Somalia', 2],
          ['Sudan', 15], ['South Africa', -30], ['South Sudan', 5],
          ['Swaziland', -26], ['Tanzania', -6], ['Togo', 6], ['Tunisia', 34],
          ['Uganda', 1], ['Western Sahara', 25], ['Zambia', -15],
          ['Zimbabwe', -18]
        ]);

        var options = {
          region: '002', // Africa
          colorAxis: {colors: ['#00853f', 'black', '#e31b23']},
          backgroundColor: '#81d4fa',
          datalessRegionColor: '#f8bbd0',
          defaultColor: '#f5f5f5',
        };

        var chart = new google.visualization.GeoChart(document.getElementById('geochart-colors'));
        chart.draw(data, options);
      };
    </script>
</head>

<body>
    <div id = "elm"></div>


    <div class="row">
        <div id ="map">
                <div id="geochart-colors" style="width: 700px; height: 433px;"></div>

        </div>
    </div>

    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script type = "text/javascript">
        var div = document.getElementById('elm');
        var mapDiv = document.getElementById('map');
        var map = Elm.Gmap.embed(div);
        //var map = Elm.embed(Elm.Gmap, div, { reset:[] });

        map.ports.lat.subscribe(function(lat) {
            console.log("received", lat);
            var initLatLng = new google.maps.LatLng(lat, 5);
            gmap.setCenter(initLatLng);
        })

        var initLatLng = new google.maps.LatLng(39.7, 105);
        var mapOptions = {
            zoom: 4,
            center: initLatLng
        };
        var gmap = new google.maps.Map(mapDiv, mapOptions);
    </script>
</body>

</html>